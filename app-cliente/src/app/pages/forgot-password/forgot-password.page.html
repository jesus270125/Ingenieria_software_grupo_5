<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Recuperar Cuenta</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <div class="forgot-container ion-text-center">

    <ion-icon name="lock-open-outline" style="font-size: 60px; color: #4F46E5; margin-bottom: 20px;"></ion-icon>

    <div *ngIf="step === 1">
      <h2>¿Olvidaste tu contraseña?</h2>
      <p class="ion-text-muted">Ingresa tu correo para recibir un código de recuperación.</p>

      <ion-item class="custom-input ion-margin-top">
        <ion-label position="stacked">Correo Electrónico</ion-label>
        <ion-input type="email" [(ngModel)]="email" placeholder="ejemplo@correo.com"></ion-input>
      </ion-item>

      <ion-button expand="block" class="ion-margin-top" (click)="enviarCodigo()" [disabled]="isLoading">
        {{ isLoading ? 'Enviando...' : 'Enviar Código' }}
      </ion-button>
    </div>

    <div *ngIf="step === 2">
      <h2>Código Enviado</h2>
      <p class="ion-text-muted">Revisa tu correo {{email}} e ingresa el código.</p>

      <ion-item class="custom-input ion-margin-top">
        <ion-label position="stacked">Código de 6 dígitos</ion-label>
        <ion-input type="text" [(ngModel)]="codigo" placeholder="123456"></ion-input>
      </ion-item>

      <ion-item class="custom-input ion-margin-top">
        <ion-label position="stacked">Nueva Contraseña</ion-label>
        <ion-input type="password" [(ngModel)]="newPassword" placeholder="********"></ion-input>
      </ion-item>

      <ion-button expand="block" class="ion-margin-top" (click)="cambiarPassword()" [disabled]="isLoading">
        {{ isLoading ? 'Verificando...' : 'Restablecer Contraseña' }}
      </ion-button>
    </div>

    <ion-button fill="clear" color="medium" class="ion-margin-top" (click)="volver()">
      Cancelar y Volver
    </ion-button>

  </div>

</ion-content>
