<div class="forgot-wrapper">
  
  <div class="forgot-card">
    
    <!-- Decoración de fondo en la tarjeta -->
    <div class="card-decoration"></div>

    <div class="forgot-header">
      <div class="logo-box">
        <!-- Logo SVG Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="logo-icon">
          <path d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
        </svg>
      </div>
      <h2 *ngIf="step === 1">¿Olvidaste tu contraseña?</h2>
      <h2 *ngIf="step === 2">Código Enviado</h2>
      <p class="subtitle" *ngIf="step === 1">Ingresa tu correo electrónico y te enviaremos un código de recuperación</p>
      <p class="subtitle" *ngIf="step === 2">Revisa tu correo <strong>{{email}}</strong> e ingresa el código de 6 dígitos</p>
    </div>

    <div class="forgot-body">
      
      <!-- Paso 1: Solicitar código -->
      <div *ngIf="step === 1">
        <div class="input-group">
          <label for="email">Correo Electrónico</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <input 
              type="email" 
              id="email"
              placeholder="nombre@ejemplo.com" 
              [(ngModel)]="email"
              (keyup.enter)="enviarCodigo()">
          </div>
        </div>

        <button (click)="enviarCodigo()" [disabled]="isLoading" [class.loading]="isLoading">
          <span *ngIf="!isLoading">ENVIAR CÓDIGO</span>
          <div *ngIf="isLoading" class="spinner"></div>
        </button>
      </div>

      <!-- Paso 2: Cambiar contraseña -->
      <div *ngIf="step === 2">
        <div class="input-group">
          <label for="codigo">Código de Verificación</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon">
              <path d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path>
            </svg>
            <input 
              type="text" 
              id="codigo"
              placeholder="123456"
              maxlength="6"
              [(ngModel)]="codigo"
              (keyup.enter)="cambiarPassword()">
          </div>
        </div>

        <div class="input-group">
          <label for="password">Nueva Contraseña</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <input 
              type="password" 
              id="password"
              placeholder="Mínimo 6 caracteres"
              [(ngModel)]="newPassword"
              (keyup.enter)="cambiarPassword()">
          </div>
        </div>

        <button (click)="cambiarPassword()" [disabled]="isLoading" [class.loading]="isLoading">
          <span *ngIf="!isLoading">RESTABLECER CONTRASEÑA</span>
          <div *ngIf="isLoading" class="spinner"></div>
        </button>
      </div>

    </div>

    <div class="forgot-footer">
      <a routerLink="/login" class="back-link">← Volver al inicio de sesión</a>
    </div>

  </div>

</div>
