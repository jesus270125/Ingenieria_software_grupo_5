<div class="breadcrumb">
  Panel / <strong>Dashboard</strong>
</div>

<div class="page-header">
  <h1 class="page-title">Dashboard</h1>
  <p style="color: var(--text-muted); margin-top: 5px;">
    <span *ngIf="!loading">Ãšltima actualizaciÃ³n: {{ 'ahora' }}</span>
    <span *ngIf="loading">Cargando datos...</span>
  </p>
</div>

<!-- EstadÃ­sticas principales -->
<div class="stats-grid">
  <div class="stat-card stat-primary">
    <div class="stat-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
    </div>
    <div class="stat-content">
      <div class="stat-label">Pedidos Hoy</div>
      <div class="stat-value">{{ stats.pedidosHoy }}</div>
      <div class="stat-footer">Total: {{ stats.pedidosTotal }}</div>
    </div>
  </div>

  <div class="stat-card stat-success">
    <div class="stat-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
    </div>
    <div class="stat-content">
      <div class="stat-label">Ventas Hoy</div>
      <div class="stat-value">S/ {{ stats.ventasHoy | number:'1.2-2' }}</div>
      <div class="stat-footer">Mes: S/ {{ stats.ventasMes | number:'1.2-2' }}</div>
    </div>
  </div>

  <div class="stat-card stat-info">
    <div class="stat-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 8 21 12 17 16"></polyline><line x1="21" y1="12" x2="8" y2="12"></line></svg>
    </div>
    <div class="stat-content">
      <div class="stat-label">Motorizados Activos</div>
      <div class="stat-value">{{ stats.motorizadosActivos }}</div>
      <div class="stat-footer">Total: {{ stats.motorizadosTotal }}</div>
    </div>
  </div>

  <div class="stat-card stat-warning">
    <div class="stat-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
    </div>
    <div class="stat-content">
      <div class="stat-label">Clientes Nuevos</div>
      <div class="stat-value">{{ stats.clientesNuevos }}</div>
      <div class="stat-footer">Total: {{ stats.clientesTotal }}</div>
    </div>
  </div>
</div>

<!-- GrÃ¡ficas principales -->
<div class="charts-grid">
  <div class="card chart-card">
    <div class="card-header">
      <h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px; vertical-align:text-bottom"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
        Tendencia de Pedidos (7 dÃ­as)
      </h3>
    </div>
    <div class="chart-container">
      <canvas #pedidosChart></canvas>
    </div>
  </div>

  <div class="card chart-card">
    <div class="card-header">
      <h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px; vertical-align:text-bottom"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
        Ventas por DÃ­a (7 dÃ­as)
      </h3>
    </div>
    <div class="chart-container">
      <canvas #ventasChart></canvas>
    </div>
  </div>
</div>

<!-- Estado de pedidos y distribuciÃ³n -->
<div class="grid-2">
  <div class="card">
    <div class="card-header">
      <h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px; vertical-align:text-bottom"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>
        Estado de Pedidos
      </h3>
    </div>
    <div class="chart-container-small">
      <canvas #estadosChart></canvas>
    </div>
    <div class="estados-summary">
      <div class="estado-item">
        <span class="badge badge-warning">Pendientes</span>
        <strong>{{ stats.pedidosPendientes }}</strong>
      </div>
      <div class="estado-item">
        <span class="badge badge-info">En Curso</span>
        <strong>{{ stats.pedidosEnCurso }}</strong>
      </div>
      <div class="estado-item">
        <span class="badge badge-success">Completados</span>
        <strong>{{ stats.pedidosCompletados }}</strong>
      </div>
      <div class="estado-item">
        <span class="badge badge-danger">Cancelados</span>
        <strong>{{ stats.pedidosCancelados }}</strong>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px; vertical-align:text-bottom"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
        Actividad Reciente
      </h3>
    </div>
    <div class="actividad-list">
      <div *ngFor="let item of actividadReciente" class="actividad-item">
        <div class="actividad-icon" [ngSwitch]="item.tipo">
          <!-- Icono Pedido -->
          <svg *ngSwitchCase="'pedido'" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
          <!-- Icono Motorizado -->
          <svg *ngSwitchCase="'motorizado'" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18.5" cy="17.5" r="3.5"></circle><circle cx="5.5" cy="17.5" r="3.5"></circle><circle cx="15" cy="5" r="1"></circle><path d="M12 17.5V14l-3-3 4-3 2 3h2"></path></svg>
          <!-- Icono Cliente -->
          <svg *ngSwitchCase="'cliente'" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
          <!-- Icono Producto -->
          <svg *ngSwitchCase="'producto'" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
          <!-- Icono Local -->
          <svg *ngSwitchCase="'local'" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21h18"></path><path d="M5 21V7l8-4 8 4v14"></path><path d="M9 10a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2"></path></svg>
          <!-- Icono Default -->
          <svg *ngSwitchDefault xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
        </div>
        <div class="actividad-content">
          <div class="actividad-descripcion">{{ item.descripcion }}</div>
          <div class="actividad-fecha">{{ item.fecha }}</div>
        </div>
        <span *ngIf="item.estado" [class]="'badge ' + getEstadoClass(item.estado)">
          {{ item.estado }}
        </span>
      </div>
      <div *ngIf="actividadReciente.length === 0" class="empty-state">
        Sin actividad reciente
      </div>
    </div>
  </div>
</div>

<!-- Rankings -->
<div class="grid-2">
  <div class="card">
    <div class="card-header">
      <h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px; vertical-align:text-bottom"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>
        Top Productos
      </h3>
    </div>
    <div class="ranking-list">
      <div *ngFor="let item of topProductos; let i = index" class="ranking-item">
        <div class="ranking-position">{{ i + 1 }}</div>
        <div class="ranking-info">
          <div class="ranking-name">{{ item.nombre }}</div>
          <div class="ranking-meta">{{ item.cantidad }} pedidos</div>
        </div>
        <div class="ranking-value" *ngIf="item.total">
          S/ {{ item.total | number:'1.2-2' }}
        </div>
      </div>
      <div *ngIf="topProductos.length === 0" class="empty-state">
        Sin datos disponibles
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h3>
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px; vertical-align:text-bottom"><path d="M3 21h18"></path><path d="M5 21V7l8-4 8 4v14"></path><path d="M9 10a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2"></path></svg>
        Top Locales
      </h3>
    </div>
    <div class="ranking-list">
      <div *ngFor="let item of topLocales; let i = index" class="ranking-item">
        <div class="ranking-position">{{ i + 1 }}</div>
        <div class="ranking-info">
          <div class="ranking-name">{{ item.nombre }}</div>
          <div class="ranking-meta">{{ item.cantidad }} pedidos</div>
        </div>
        <div class="ranking-value" *ngIf="item.total">
          S/ {{ item.total | number:'1.2-2' }}
        </div>
      </div>
      <div *ngIf="topLocales.length === 0" class="empty-state">
        Sin datos disponibles
      </div>
    </div>
  </div>
</div>

<!-- Accesos rÃ¡pidos -->
<div class="card quick-links">
  <div class="card-header">
    <h3>ğŸš€ Accesos RÃ¡pidos</h3>
  </div>
  <div class="quick-grid">
    <a routerLink="/admin/pedidos" class="quick-item">
      <div class="icon-box">ğŸšš</div>
      <div class="label">Pedidos</div>
    </a>

    <a routerLink="/admin/locales" class="quick-item">
      <div class="icon-box">ğŸ </div>
      <div class="label">Locales</div>
    </a>

    <a routerLink="/admin/productos" class="quick-item">
      <div class="icon-box">ğŸ“¦</div>
      <div class="label">Productos</div>
    </a>

    <a routerLink="/admin/motorizados" class="quick-item">
      <div class="icon-box">ğŸï¸</div>
      <div class="label">Motorizados</div>
    </a>

    <a routerLink="/admin/reportes" class="quick-item">
      <div class="icon-box">ğŸ“Š</div>
      <div class="label">Reportes</div>
    </a>

    <a routerLink="/admin/promociones" class="quick-item">
      <div class="icon-box">ğŸ</div>
      <div class="label">Promociones</div>
    </a>

    <a routerLink="/admin/versiones" class="quick-item">
      <div class="icon-box">ğŸ“œ</div>
      <div class="label">Versiones</div>
    </a>

    <a routerLink="/admin/busqueda" class="quick-item">
      <div class="icon-box">ğŸ”</div>
      <div class="label">Buscar</div>
    </a>
  </div>
</div>